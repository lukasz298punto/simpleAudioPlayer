(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{100:function(e,t,n){},283:function(e,t,n){"use strict";n.r(t);var r=n(51),c=Object(r.b)({name:"audioPlayer",initialState:{currentTime:0,duration:0},reducers:{setCurrentTime:function(e,t){e.currentTime=t.payload},setDuration:function(e,t){e.duration=t.payload}}}),a=c.actions,i=a.setCurrentTime,o=a.setDuration,u=function(e){return e.audioPlayer.currentTime},s=function(e){return e.audioPlayer.duration},l=c.reducer,d=Object(r.b)({name:"global",initialState:{loading:!1},reducers:{setLoading:function(e,t){e.loading=t.payload}}}),b=d.actions.setLoading,j=function(e){return e.global.loading},p=d.reducer,O=Object(r.b)({name:"uploadFiles",initialState:[],reducers:{addFile:function(e,t){e.push(t.payload)}}}),f=O.actions.addFile,m=function(e){return e.uploadFiles},g=O.reducer,y=Object(r.a)({reducer:{uploadFiles:g,audioPlayer:l,global:p}}),v=n(0),x=n.n(v),h=n(20),C=n.n(h),T=n(27),w=n(115),P=n.n(w),k=n(98),S=n(167),F=n(146),A=n(75),I=n(300),z=n(292),L=n(158),D=n(287),E=n(288),U=n(117),B=n(289),R=n(162),N=n.n(R),J=(n(100),n(293)),M=n(294),_=n(295),V=n(296),q=n(297),G=n(298),H=n(299),K=n(53),Q=n(147),W=n(8),X=Q.a.div.withConfig({displayName:"AudioPlayer__Player",componentId:"d895w-0"})(["background-color:green;.ant-slider-track{background-color:red;}"]);var Y=function(){var e=Object(v.useState)(!1),t=Object(A.a)(e,2),n=t[0],r=t[1],c=Object(v.useState)(!1),a=Object(A.a)(c,2),l=a[0],d=a[1],b=Object(v.useRef)(null),j=Object(T.b)(),p=Object(T.c)(s);console.count("AudioPlayer");var O=Object(T.c)(m),f=function(e){b.current.currentTime=e};return Object(v.useEffect)((function(){var e,t;n?null===(e=b.current)||void 0===e||e.play():null===(t=b.current)||void 0===t||t.pause()}),[n]),Object(W.jsxs)(X,{children:[Object(W.jsx)(U.a,{disabled:!l,size:"large",type:"primary",shape:"circle",icon:Object(W.jsx)(J.a,{}),onClick:function(){f(0)}}),Object(W.jsx)(U.a,{disabled:!l,size:"large",type:"primary",shape:"circle",icon:Object(W.jsx)(M.a,{})}),Object(W.jsx)(U.a,{disabled:!l,size:"large",type:"primary",shape:"circle",icon:Object(W.jsx)(_.a,{})}),Object(W.jsx)(U.a,{disabled:!l,size:"large",type:"primary",shape:"circle",icon:Object(W.jsx)(V.a,{}),onClick:function(){f(p),r(!1)}}),Object(W.jsx)(U.a,{disabled:!l,size:"large",type:"primary",shape:"circle",icon:Object(W.jsx)(q.a,{})}),n?Object(W.jsx)(U.a,{disabled:!l,size:"large",type:"primary",shape:"circle",icon:Object(W.jsx)(G.a,{}),onClick:function(){r(!1)}}):Object(W.jsx)(U.a,{disabled:!l,size:"large",type:"primary",shape:"circle",icon:Object(W.jsx)(H.a,{}),onClick:function(){r(!0)}}),Object(W.jsx)(re,{selector:u}),Object(W.jsx)("audio",{src:Object(K.get)(O,"[0].src"),id:"audio",ref:b,onCanPlay:function(){return d(!0)},onLoadedData:function(){var e;return j(o((null===b||void 0===b||null===(e=b.current)||void 0===e?void 0:e.duration)||0))},onTimeUpdate:function(e){var t;return j(i((null===b||void 0===b||null===(t=b.current)||void 0===t?void 0:t.currentTime)||0))}}),Object(W.jsx)(re,{selector:s}),Object(W.jsx)($,{setAudioCurrentTime:f,setIsPlaying:r})]})},Z=n(291);var $=function(e){var t=e.setAudioCurrentTime,n=e.setIsPlaying,r=Object(T.c)(s),c=Object(T.c)(u);return console.count("TimeBar"),Object(W.jsx)(Z.a,{value:c,min:0,max:r,onChange:function(e){n(!1),t(e)},onAfterChange:function(e){return n(!0)}})},ee=n(290),te=function(e){return e<10?"0".concat(e):"".concat(e)},ne=function(e){var t=Object(ee.a)({start:0,end:1e3*e});return"".concat(te(t.minutes||0),":").concat(te(t.seconds||0))};var re=function(e){var t=e.selector;console.count("TimeBlock");var n=Object(T.c)(t);return Object(W.jsx)("div",{children:ne(n)})},ce=n(156),ae=n(157),ie=["audio/wav","audio/mpeg","audio/mp4","audio/aac","audio/aacp","audio/ogg","audio/webm","audio/x-caf","audio/flac"];var oe=function(){var e=Object(v.useRef)(null),t=Object(v.useState)(""),n=Object(A.a)(t,2),r=n[0],c=(n[1],Object(T.b)()),a=Object(T.c)(m),i=Object(T.c)(j);function o(){return(o=Object(F.a)(P.a.mark((function t(n){var r,a,i,o;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(b(!0)),t.prev=1,t.next=4,s(n);case 4:return r=t.sent,(a=null===e||void 0===e?void 0:e.current)&&(a.src=r),t.next=9,u(n);case 9:return i=t.sent,t.next=12,l(i);case 12:o=t.sent,console.log(i,"tags"),console.log(Object(K.get)(i,"album"),"album"),c(f({uid:n.uid,type:n.type,cover:o,album:Object(K.get)(i,"album"),artist:Object(K.get)(i,"artist"),title:Object(K.get)(i,"title"),year:Object(K.get)(i,"year"),src:r})),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(1),z.b.error("Error while processing audio files");case 21:return t.prev=21,c(b(!1)),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[1,18,21,24]])})))).apply(this,arguments)}function u(e){return new Promise((function(t,n){ce.read(e,{onSuccess:function(e){var n=e.tags;t(n)},onError:function(e){n(e)}})}))}function s(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){t(r.result)},r.onerror=function(e){n(e)}}))}console.log(a,"files");var l=function(e){var t=e.picture;if(!t)return null;var n=t.data.map((function(e){return String.fromCharCode(e)})).join("");return"data:".concat(t.format,";base64,").concat(window.btoa(n))};return Object(W.jsxs)(L.a,{spinning:i,children:[Object(W.jsx)(ae.Scrollbars,{style:{height:"40vh"},renderThumbVertical:function(e){var t=e.style,n=Object(S.a)(e,["style"]);return Object(W.jsx)("div",Object(k.a)({className:"bg-color-primary",style:Object(k.a)(Object(k.a)({},t),{color:"red"})},n))},children:Object(W.jsxs)("div",{className:"App",children:[Object(W.jsx)(D.a,{src:r}),Object(W.jsx)(E.a,{multiple:!0,showUploadList:!1,beforeUpload:function(e){var t;return t=e.type,ie.includes(t)?function(e){o.apply(this,arguments)}(e):z.b.error("Incorrect audio format from ".concat(e.name)),!1},children:Object(W.jsx)(U.a,{type:"primary",icon:Object(W.jsx)(I.a,{}),children:"Select File"})}),Object(W.jsx)(B.b,{itemLayout:"horizontal",dataSource:a,renderItem:function(e){return Object(W.jsx)(B.b.Item,{children:Object(W.jsx)(B.b.Item.Meta,{avatar:Object(W.jsx)(N.a,{src:e.cover}),title:e.title,description:"Ant Design, a design language for background applications, is refined by Ant UED Team"})})}})]})}),Object(W.jsx)(Y,{})]})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,301)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};C.a.render(Object(W.jsx)(x.a.StrictMode,{children:Object(W.jsx)(T.a,{store:y,children:Object(W.jsx)(oe,{})})}),document.getElementById("root")),ue()}},[[283,1,2]]]);
//# sourceMappingURL=main.ea4d2f8c.chunk.js.map